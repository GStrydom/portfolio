{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'react-shadow', '../polyfill'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('react-shadow'), require('../polyfill'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.reactShadow, global.polyfill);\n    global.shadowDOM = mod.exports;\n  }\n})(this, function (exports, _react, _reactShadow) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _reactShadow2 = _interopRequireDefault(_reactShadow);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  exports.default = function (element) {\n    return function (_React$PureComponent) {\n      _inherits(ShadowDOMHelper, _React$PureComponent);\n\n      function ShadowDOMHelper(props) {\n        _classCallCheck(this, ShadowDOMHelper);\n\n        var _this = _possibleConstructorReturn(this, (ShadowDOMHelper.__proto__ || Object.getPrototypeOf(ShadowDOMHelper)).call(this, props));\n\n        _this.applyStylesheet = function (classNameID) {\n          var style = document.querySelector('style[data-styled]');\n\n          if (!style) {\n            style = document.querySelector('style[data-styled-components*=' + classNameID.split(' ')[1] + ']');\n          }\n\n          if (!style) return;\n\n          try {\n            _this.styleTag.innerHTML = '';\n          } catch (e) {}\n\n          _this.styleTag.appendChild(style.cloneNode(true));\n        };\n\n        _this.state = {\n          stylesheet: false\n        };\n        return _this;\n      }\n\n      _createClass(ShadowDOMHelper, [{\n        key: 'render',\n        value: function render() {\n          var _this2 = this;\n\n          var stylesheet = this.state.stylesheet;\n          return _react2.default.createElement(_reactShadow2.default, null, _react2.default.createElement('span', null, _react2.default.createElement('span', {\n            ref: function ref(n) {\n              return _this2.styleTag = n;\n            }\n          }), _react2.default.createElement(element, _extends({}, this.props, {\n            generatedClassName: this.applyStylesheet\n          }))));\n        }\n      }]);\n\n      return ShadowDOMHelper;\n    }(_react2.default.PureComponent);\n  };\n});","map":{"version":3,"sources":["../../src/helpers/shadowDOM.js"],"names":["React","stylesheet","style","document","classNameID","generatedClassName"],"mappings":";;gDAAQ,a;;wEAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAKO,UAAA,OAAA,EAAa;AAE1B,WAAA,UAAA,oBAAA,EAAA;AAAA,MAAA,SAAA,CAAA,eAAA,EAAA,oBAAA,CAAA;;AACE,eAAA,eAAA,CAAA,KAAA,EAAmB;AAAA,QAAA,eAAA,CAAA,IAAA,EAAA,eAAA,CAAA;;AAAA,YAAA,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,CAAA,eAAA,CAAA,SAAA,IAAA,MAAA,CAAA,cAAA,CAAA,eAAA,CAAA,EAAA,IAAA,CAAA,IAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,QAAA,KAAA,CAAA,eAAA,GAOD,UAAA,WAAA,EAAiB;AACjC,cAAIE,KAAAA,GAAQC,QAAAA,CAAAA,aAAAA,CAAZ,oBAAYA,CAAZ;;AAEA,cAAI,CAAJ,KAAA,EAAY;AACVD,YAAAA,KAAAA,GAAQC,QAAAA,CAAAA,aAAAA,CAAAA,mCAAwDC,WAAAA,CAAAA,KAAAA,CAAAA,GAAAA,EAAxDD,CAAwDC,CAAxDD,GAARD,GAAQC,CAARD;AACD;;AAED,cAAI,CAAJ,KAAA,EAAY;;AAEZ,cAAI;AACF,YAAA,KAAA,CAAA,QAAA,CAAA,SAAA,GAAA,EAAA;AADF,WAAA,CAEE,OAAA,CAAA,EAAS,CAAE;;AACb,UAAA,KAAA,CAAA,QAAA,CAAA,WAAA,CAA0BA,KAAAA,CAAAA,SAAAA,CAA1B,IAA0BA,CAA1B;AAnBiB,SAAA;;AAEjB,QAAA,KAAA,CAAA,KAAA,GAAa;AACXD,UAAAA,UAAAA,EAAY;AADD,SAAb;AAFiB,eAAA,KAAA;AAKlB;;AANH,MAAA,YAAA,CAAA,eAAA,EAAA,CAAA;AAAA,QAAA,GAAA,EAAA,QAAA;AAAA,QAAA,KAAA,EAAA,SAAA,MAAA,GAuBW;AAAA,cAAA,MAAA,GAAA,IAAA;;AAAA,cACCA,UADD,GACgB,KADhB,KACgB,CADhB,UAAA;AAEP,iBACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,aAAA,CAAD,OAAA,EAAA,IAAA,EACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,YAAA,GAAA,EAAK,SAAA,GAAA,CAAA,CAAA,EAAA;AAAA,qBAAO,MAAA,CAAA,QAAA,GAAP,CAAA;AADb;AACE,WAAA,CADF,EAEGD,OAAAA,CAAAA,OAAAA,CAAAA,aAAAA,CAAAA,OAAAA,EAAAA,QAAAA,CAAAA,EAAAA,EAAiC,KAAjCA,KAAAA,EAAAA;AAA6CK,YAAAA,kBAAAA,EAAoB,KAAjEL;AAAAA,WAAAA,CAAAA,CAFH,CADF,CADF;AAQD;AAjCH,OAAA,CAAA,CAAA;;AAAA,aAAA,eAAA;AAAA,KAAA,CAAqCA,OAAAA,CAAAA,OAAAA,CAArC,aAAA,CAAA","sourcesContent":["require('../polyfill')\n\nimport React from 'react'\nimport ShadowDOM from 'react-shadow'\n\nexport default (element) => {\n\n  return class ShadowDOMHelper extends React.PureComponent {\n    constructor(props) {\n      super(props)\n      this.state = {\n        stylesheet: false\n      }\n    }\n\n    applyStylesheet = (classNameID) => {\n      let style = document.querySelector('style[data-styled]');\n\n      if (!style) {\n        style = document.querySelector(`style[data-styled-components*=${classNameID.split(' ')[1]}]`);\n      }\n\n      if (!style) return;\n\n      try {\n        this.styleTag.innerHTML = '';\n      } catch(e) {}\n      this.styleTag.appendChild(style.cloneNode(true));\n    }\n\n    render() {\n      const { stylesheet } = this.state\n      return (\n        <ShadowDOM>\n          <span>\n            <span ref={(n) => this.styleTag = n} />\n            {React.createElement(element, {...this.props, generatedClassName: this.applyStylesheet})}\n          </span>\n        </ShadowDOM>\n      )\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}