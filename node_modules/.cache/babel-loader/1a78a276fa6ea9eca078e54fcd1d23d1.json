{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes);\n    global.Async = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var SelectAsync = function (_React$PureComponent) {\n    _inherits(SelectAsync, _React$PureComponent);\n\n    function SelectAsync(props) {\n      _classCallCheck(this, SelectAsync);\n\n      var _this = _possibleConstructorReturn(this, (SelectAsync.__proto__ || Object.getPrototypeOf(SelectAsync)).call(this, props));\n\n      _this.loadOptions = function (term) {\n        var loadOptions = _this.props.loadOptions;\n\n        var callback = function callback(error, data) {\n          var options = data && data.options || [];\n\n          if (callback === _this._callback) {\n            _this._callback = null;\n\n            _this.setState({\n              isLoading: false,\n              options: options\n            });\n          }\n        };\n\n        _this._callback = callback;\n        var promise = loadOptions(term, callback);\n\n        if (promise) {\n          promise.then(function (data) {\n            return callback(null, data);\n          }, function (error) {\n            return callback(error);\n          });\n        }\n\n        if (_this._callback && !_this.state.isLoading) {\n          _this.setState({\n            isLoading: true\n          });\n        }\n      };\n\n      _this.state = {\n        isLoading: false,\n        options: props.options\n      };\n      return _this;\n    }\n\n    _createClass(SelectAsync, [{\n      key: 'render',\n      value: function render() {\n        return _react2.default.cloneElement(this.props.children, Object.assign({}, this.props, {\n          options: this.state.options,\n          onTyping: this.loadOptions\n        }));\n      }\n    }]);\n\n    return SelectAsync;\n  }(_react2.default.PureComponent);\n\n  SelectAsync.propTypes = {\n    autoload: _propTypes2.default.bool.isRequired,\n    ignoreAccents: _propTypes2.default.bool,\n    ignoreCase: _propTypes2.default.bool,\n    loadOptions: _propTypes2.default.func.isRequired\n  };\n  SelectAsync.defaultProps = {\n    loadOptions: function loadOptions() {}\n  };\n  exports.default = SelectAsync;\n});","map":{"version":3,"sources":["../../src/Select/Async.js"],"names":["SelectAsync","React","PureComponent","isLoading","options","props","loadOptions","callback","data","promise","onTyping","autoload","PropTypes","ignoreAccents","ignoreCase","isRequired"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAGMA,W;;;AACJ,aAAA,WAAA,CAAA,KAAA,EAAmB;AAAA,MAAA,eAAA,CAAA,IAAA,EAAA,WAAA,CAAA;;AAAA,UAAA,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,CAAA,WAAA,CAAA,SAAA,IAAA,MAAA,CAAA,cAAA,CAAA,WAAA,CAAA,EAAA,IAAA,CAAA,IAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,MAAA,KAAA,CAAA,WAAA,GASL,UAAA,IAAA,EAAU;AAAA,YACdM,WADc,GACE,KAAA,CADF,KACE,CADF,WAAA;;AAGtB,YAAMC,QAAAA,GAAW,SAAXA,QAAW,CAAA,KAAA,EAAA,IAAA,EAAiB;AAChC,cAAMH,OAAAA,GAAUI,IAAAA,IAAQA,IAAAA,CAARA,OAAAA,IAAhB,EAAA;;AACA,cAAID,QAAAA,KAAa,KAAA,CAAjB,SAAA,EAAiC;AACnC,YAAA,KAAA,CAAA,SAAA,GAAA,IAAA;;AACA,YAAA,KAAA,CAAA,QAAA,CAAc;AACbJ,cAAAA,SAAAA,EADa,KAAA;AAEbC,cAAAA,OAAAA,EAAAA;AAFa,aAAd;AAIA;AARA,SAAA;;AAWA,QAAA,KAAA,CAAA,SAAA,GAAA,QAAA;AAEA,YAAMK,OAAAA,GAAUH,WAAAA,CAAAA,IAAAA,EAAhB,QAAgBA,CAAhB;;AAEA,YAAA,OAAA,EAAa;AACdG,UAAAA,OAAAA,CAAAA,IAAAA,CACC,UAAA,IAAA,EAAA;AAAA,mBAAUF,QAAAA,CAAAA,IAAAA,EAAV,IAAUA,CAAV;AADDE,WAAAA,EAEC,UAAA,KAAA,EAAA;AAAA,mBAAWF,QAAAA,CAAX,KAAWA,CAAX;AAFDE,WAAAA;AAIA;;AAED,YAAK,KAAA,CAAA,SAAA,IAAkB,CAAC,KAAA,CAAA,KAAA,CAAxB,SAAA,EAA+C;AAC9C,UAAA,KAAA,CAAA,QAAA,CAAc;AACbN,YAAAA,SAAAA,EAAW;AADE,WAAd;AAGA;AAtCkB,OAAA;;AAGjB,MAAA,KAAA,CAAA,KAAA,GAAa;AACXA,QAAAA,SAAAA,EADW,KAAA;AAEXC,QAAAA,OAAAA,EAASC,KAAAA,CAAMD;AAFJ,OAAb;AAHiB,aAAA,KAAA;AAOlB;;;;+BAkCQ;AACP,eAAO,OAAA,CAAA,OAAA,CAAA,YAAA,CAAmB,KAAA,KAAA,CAAnB,QAAA,EAAwC,MAAA,CAAA,MAAA,CAAA,EAAA,EAAkB,KAAlB,KAAA,EAA8B;AAC3EA,UAAAA,OAAAA,EAAS,KAAA,KAAA,CADkE,OAAA;AAE3EM,UAAAA,QAAAA,EAAU,KAAKJ;AAF4D,SAA9B,CAAxC,CAAP;AAID;;;;IA/CuBL,OAAAA,CAAAA,OAAAA,CAAMC,a;;AAkDhCF,EAAAA,WAAAA,CAAAA,SAAAA,GAAwB;AACtBW,IAAAA,QAAAA,EAAUC,WAAAA,CAAAA,OAAAA,CAAAA,IAAAA,CADY,UAAA;AAEtBC,IAAAA,aAAAA,EAAeD,WAAAA,CAAAA,OAAAA,CAFO,IAAA;AAGtBE,IAAAA,UAAAA,EAAYF,WAAAA,CAAAA,OAAAA,CAHU,IAAA;AAItBN,IAAAA,WAAAA,EAAaM,WAAAA,CAAAA,OAAAA,CAAAA,IAAAA,CAAeG;AAJN,GAAxBf;AAOAA,EAAAA,WAAAA,CAAAA,YAAAA,GAA2B;AACzBM,IAAAA,WAAAA,EAAa,SAAA,WAAA,GAAM,CAAE;AADI,GAA3BN;oBAIeA,W","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass SelectAsync extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      options: props.options\n    }\n  }\n\n  loadOptions = (term) => {\n    const { loadOptions } = this.props\n\n    const callback = (error, data) => {\n      const options = data && data.options || [];\n      if (callback === this._callback) {\n\t\t\t\tthis._callback = null;\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false,\n\t\t\t\t\toptions\n\t\t\t\t});\n\t\t\t}\n    }\n\n    this._callback = callback\n\n    const promise = loadOptions(term, callback);\n\n    if (promise) {\n\t\t\tpromise.then(\n\t\t\t\t(data) => callback(null, data),\n\t\t\t\t(error) => callback(error)\n\t\t\t);\n\t\t}\n\n\t\tif ( this._callback && !this.state.isLoading ) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true\n\t\t\t});\n\t\t}\n  }\n\n  render() {\n    return React.cloneElement(this.props.children, Object.assign({}, this.props, {\n      options: this.state.options,\n      onTyping: this.loadOptions\n    }))\n  }\n}\n\nSelectAsync.propTypes = {\n  autoload: PropTypes.bool.isRequired,\n  ignoreAccents: PropTypes.bool,\n  ignoreCase: PropTypes.bool,\n  loadOptions: PropTypes.func.isRequired\n}\n\nSelectAsync.defaultProps = {\n  loadOptions: () => {}\n}\n\nexport default SelectAsync\n"]},"metadata":{},"sourceType":"script"}