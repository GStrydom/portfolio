{"ast":null,"code":"'use strict';\n/**\n * Month-Picker\n *\n * Properties:\n * @value: Default selected option value\n * @options: Options of the picker\n * @onChange: callback on changing selected option\n * @onShow: callback on calling show method\n * @onDismiss: callback on calling dismiss method\n * @onClickAway: callback on clicking area outside the picker panel\n * @width: width of the picker panel\n * @theme: theme setting of month-picker; 2 options (light/dark); default theme is light\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactTapper = require('react-tapper');\n\nvar _reactTapper2 = _interopRequireDefault(_reactTapper);\n\nvar _es6Viewpoint = require('es6-viewpoint');\n\nvar _es6Viewpoint2 = _interopRequireDefault(_es6Viewpoint);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar isBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\";\n\nvar Picker = function (_Component) {\n  _inherits(Picker, _Component);\n\n  function Picker(props, context) {\n    _classCallCheck(this, Picker);\n\n    var _this = _possibleConstructorReturn(this, (Picker.__proto__ || Object.getPrototypeOf(Picker)).call(this, props, context));\n\n    _this.state = {\n      value: _this.props.value,\n      options: _this.props.options,\n      open: false,\n      optionHeight: 0,\n      _scrollStartTop: [],\n      _initValueIndexes: [],\n      _scrollTimer: undefined,\n      closeable: false\n    };\n    _this._handleOverlayTouchTap = _this._handleOverlayTouchTap.bind(_this);\n    _this._onPageScroll = _this._onPageScroll.bind(_this);\n    _this._onScroll = _this._onScroll.bind(_this);\n    _this._clickOnOption = _this._clickOnOption.bind(_this);\n    return _this;\n  }\n\n  _createClass(Picker, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this; //if ( Array.isArray(nextProps.value) ) {\n      //    nextProps.value.forEach((v, idx) => {\n      //        if (this.state.options[idx] && this.state.options[idx] !== nextProps.options[idx]) {\n      //            let node = this.refs['list-'+idx] //div, ReactDOM.findDOMNode( this.refs['list-'+idx] )\n      //            node.scrollTop = this.state._scrollStartTop[idx] = 0\n      //        }\n      //    })\n      //}\n      //fixed scrollTop when update props\n\n\n      var values = nextProps.value,\n          opArr = nextProps.options,\n          preValues = this.state.value,\n          preOpArr = this.state.options,\n          opHeight = this.state.optionHeight;\n\n      if (!Array.isArray(values)) {\n        values = [values];\n        opArr = [opArr];\n        preValues = [preValues];\n        preOpArr = [preOpArr];\n      }\n\n      values.forEach(function (v, idx) {\n        if (values[idx] !== preValues[idx] || opArr[idx] !== preOpArr[idx]) {\n          var ops = opArr[idx],\n              top = 0;\n\n          for (var oi = 0; oi < ops.length; oi++) {\n            var opv = typeof ops[oi] === 'string' || typeof ops[oi] === 'number' ? ops[oi] : ops[oi].value;\n\n            if (String(opv) === String(v)) {\n              top = oi * opHeight;\n              break;\n            }\n          }\n\n          var node = _this2.refs['list-' + idx]; //div, ReactDOM.findDOMNode( this.refs['list-'+idx] )\n\n          node.scrollTop = _this2.state._scrollStartTop[idx] = top;\n        }\n      });\n      this.setState({\n        value: nextProps.value,\n        options: nextProps.options\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var op = this.refs['op-0-0'],\n          opHeight = 0;\n\n      if (op) {\n        opHeight = this.state.optionHeight = _reactDom2.default.findDOMNode(op).clientHeight;\n      }\n\n      this.state._initValueIndexes.forEach(function (vi, idx) {\n        if (vi > 0) {\n          var node = _this3.refs['list-' + idx]; //div, ReactDOM.findDOMNode( this.refs['list-'+idx] )\n\n          node.scrollTop = _this3.state._scrollStartTop[idx] = vi * opHeight;\n        }\n      }); //window.addEventListener('scroll', this._onPageScroll)\n\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {//window.removeEventListener('scroll', this._onPageScroll)\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return this.state.value;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var values = this.state.value,\n          __options = this.state.options;\n\n      if (!Array.isArray(values)) {\n        values = [values];\n        __options = [__options];\n      }\n\n      var initValueIndexes = [];\n      var style = {\n        width: 100 / __options.length + '%'\n      };\n      var i = -1; //counter for __options, for it is an array or key-map object\n\n      var lists = __options.map(function (options) {\n        if (!options) return;\n        i++;\n        var j = -1; //counter for options, for it is an array or key-map object\n\n        return _react2.default.createElement('div', {\n          key: i,\n          ref: 'list-' + i,\n          'data-id': i,\n          className: 'list-wrap',\n          style: style,\n          onScroll: isBrowser ? _this4._onScroll : undefined\n        }, _react2.default.createElement('ul', null, options.map(function (op) {\n          j++;\n\n          if (typeof op === 'string' || typeof op === 'number') {\n            op = {\n              text: op,\n              value: op\n            };\n          } else if ((typeof op === 'undefined' ? 'undefined' : _typeof(op)) !== 'object' || !op.text) return;\n\n          if (typeof op.value !== 'string' && typeof op.value !== 'number') op.value = '';\n\n          if (String(op.value) === String(values[i])) {\n            initValueIndexes.push(j);\n          }\n\n          return _react2.default.createElement(_reactTapper2.default, {\n            key: j,\n            ref: 'op-' + i + '-' + j,\n            'data-id': i + '-' + j,\n            'data-value': JSON.stringify(op),\n            component: 'li',\n            onTap: _this4._clickOnOption\n          }, op.text);\n        })));\n      });\n\n      this.state._initValueIndexes = initValueIndexes;\n      var popupStyle = {};\n\n      if (this.props.width && _es6Viewpoint2.default && _es6Viewpoint2.default.width >= 768) {\n        popupStyle.width = this.props.width;\n      }\n\n      return _react2.default.createElement('div', {\n        className: [\"picker\", this.props.className].join(' ')\n      }, this.props.children, _react2.default.createElement('div', {\n        className: [\"container\", \"table\", this.props.className, this.state.open ? \"show\" : undefined].join(' ')\n      }, _react2.default.createElement(_reactTapper2.default, {\n        className: 'overlay',\n        onTap: this._handleOverlayTouchTap\n      }), _react2.default.createElement('div', {\n        className: 'cell'\n      }, _react2.default.createElement('div', {\n        className: [\"popup\", this.props.theme, this.state.open ? \"show\" : undefined].join(' '),\n        style: popupStyle\n      }, lists, _react2.default.createElement('div', {\n        className: 'cover upper'\n      }), _react2.default.createElement('div', {\n        className: 'cover lower'\n      })))));\n    }\n  }, {\n    key: 'dismiss',\n    value: function dismiss() {\n      if (this.state.closeable) {\n        this._onDismiss();\n      }\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      // prevent rapid show/hide\n      this._onShow();\n    }\n  }, {\n    key: '_handleOverlayTouchTap',\n    value: function _handleOverlayTouchTap() {\n      if (this.state.closeable) {\n        this._onDismiss();\n\n        this.props.onClickAway && this.props.onClickAway();\n      }\n    }\n  }, {\n    key: '_onShow',\n    value: function _onShow() {\n      setTimeout(function () {\n        this.state.closeable = true;\n      }.bind(this), 250);\n      this.setState({\n        open: true\n      });\n      this.props.onShow && this.props.onShow();\n    }\n  }, {\n    key: '_onDismiss',\n    value: function _onDismiss() {\n      this.setState({\n        open: false,\n        loading: false\n      });\n      this.props.onDismiss && this.props.onDismiss();\n    }\n  }, {\n    key: '_onPageScroll',\n    value: function _onPageScroll(e) {}\n  }, {\n    key: '_onScroll',\n    value: function _onScroll(e) {\n      var _this5 = this;\n\n      var el = e.target,\n          idx = parseInt(el.dataset ? el.dataset.id : el.getAttribute('data-id'), 10),\n          opHeight = this.state.optionHeight,\n          scrollStartTop = this.state._scrollStartTop;\n      window.clearTimeout(this.state._scrollTimer);\n      this.state._scrollTimer = window.setTimeout(function () {\n        if (typeof scrollStartTop[idx] !== 'number') scrollStartTop[idx] = 0;\n        if (scrollStartTop[idx] === el.scrollTop) return;\n        var scrollTop = el.scrollTop,\n            mod = scrollTop % opHeight,\n            percent = mod / opHeight;\n\n        var toLowerItem = function toLowerItem() {\n          var diff = opHeight - mod;\n          scrollTop += diff;\n          el.scrollTop += diff;\n        };\n\n        var toUpperItem = function toUpperItem() {\n          scrollTop -= mod;\n          el.scrollTop -= mod;\n        };\n\n        if (scrollTop > scrollStartTop[idx]) {\n          percent > 0.46 ? toLowerItem() : toUpperItem();\n        } else {\n          percent < 0.64 ? toUpperItem() : toLowerItem();\n        }\n\n        scrollStartTop[idx] = scrollTop;\n        var opname = 'op-' + idx + '-' + scrollTop / opHeight;\n\n        var op = _reactDom2.default.findDOMNode(_this5.refs[opname]).getAttribute('data-value');\n\n        if (!op) return;\n        op = JSON.parse(op);\n        var value = _this5.state.value;\n\n        if (Array.isArray(value)) {\n          value[idx] = op.value;\n        } else {\n          value = op.value;\n        }\n\n        _this5.setState({\n          value: value\n        });\n\n        _this5.props.onChange(op.value, op.text, idx);\n      }, 250);\n    }\n  }, {\n    key: '_clickOnOption',\n    value: function _clickOnOption(e) {\n      var el = e.target,\n          value = el.dataset ? el.dataset.id : el.getAttribute('data-id');\n      if (!value) return;\n      var arr = value.split('-');\n      if (arr.length < 2) return;\n      var _list = this.refs['list-' + arr[0]];\n      if (!_list) return;\n      var list = _list; //div, ReactDOM.findDOMNode(_list)\n\n      list.scrollTop = this.state.optionHeight * parseInt(arr[1], 10);\n    }\n  }]);\n\n  return Picker;\n}(_react.Component);\n\nPicker.propTypes = {\n  value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.array]).isRequired,\n  options: _propTypes2.default.array.isRequired,\n  onChange: _propTypes2.default.func,\n  onShow: _propTypes2.default.func,\n  onDismiss: _propTypes2.default.func,\n  onClickAway: _propTypes2.default.func,\n  width: _propTypes2.default.string,\n  theme: _propTypes2.default.string\n};\nPicker.defaultProps = {\n  onChange: function onChange(value, text, idx) {},\n  theme: 'light'\n};\nexports.default = Picker;","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/react-website-v1-master/node_modules/react-picker/lib/picker.js"],"names":["Object","defineProperty","exports","value","_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactDom","_reactDom2","_reactTapper","_reactTapper2","_es6Viewpoint","_es6Viewpoint2","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","isBrowser","window","document","Picker","_Component","context","_this","getPrototypeOf","state","options","open","optionHeight","_scrollStartTop","_initValueIndexes","_scrollTimer","undefined","closeable","_handleOverlayTouchTap","bind","_onPageScroll","_onScroll","_clickOnOption","componentWillReceiveProps","nextProps","_this2","values","opArr","preValues","preOpArr","opHeight","Array","isArray","forEach","v","idx","ops","top","oi","opv","String","node","refs","scrollTop","setState","componentDidMount","_this3","op","findDOMNode","clientHeight","vi","componentWillUnmount","render","_this4","__options","initValueIndexes","style","width","lists","map","j","createElement","ref","className","onScroll","text","push","JSON","stringify","component","onTap","popupStyle","join","children","theme","dismiss","_onDismiss","show","_onShow","onClickAway","setTimeout","onShow","loading","onDismiss","e","_this5","el","parseInt","dataset","id","getAttribute","scrollStartTop","clearTimeout","mod","percent","toLowerItem","diff","toUpperItem","opname","parse","onChange","arr","split","_list","list","Component","propTypes","oneOfType","string","number","array","isRequired","func","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\n/**\n * Month-Picker\n *\n * Properties:\n * @value: Default selected option value\n * @options: Options of the picker\n * @onChange: callback on changing selected option\n * @onShow: callback on calling show method\n * @onDismiss: callback on calling dismiss method\n * @onClickAway: callback on clicking area outside the picker panel\n * @width: width of the picker panel\n * @theme: theme setting of month-picker; 2 options (light/dark); default theme is light\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactTapper = require('react-tapper');\n\nvar _reactTapper2 = _interopRequireDefault(_reactTapper);\n\nvar _es6Viewpoint = require('es6-viewpoint');\n\nvar _es6Viewpoint2 = _interopRequireDefault(_es6Viewpoint);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar isBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\";\n\nvar Picker = function (_Component) {\n    _inherits(Picker, _Component);\n\n    function Picker(props, context) {\n        _classCallCheck(this, Picker);\n\n        var _this = _possibleConstructorReturn(this, (Picker.__proto__ || Object.getPrototypeOf(Picker)).call(this, props, context));\n\n        _this.state = {\n            value: _this.props.value,\n            options: _this.props.options,\n            open: false,\n            optionHeight: 0,\n            _scrollStartTop: [],\n            _initValueIndexes: [],\n            _scrollTimer: undefined,\n            closeable: false\n        };\n\n        _this._handleOverlayTouchTap = _this._handleOverlayTouchTap.bind(_this);\n        _this._onPageScroll = _this._onPageScroll.bind(_this);\n        _this._onScroll = _this._onScroll.bind(_this);\n        _this._clickOnOption = _this._clickOnOption.bind(_this);\n        return _this;\n    }\n\n    _createClass(Picker, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            var _this2 = this;\n\n            //if ( Array.isArray(nextProps.value) ) {\n            //    nextProps.value.forEach((v, idx) => {\n            //        if (this.state.options[idx] && this.state.options[idx] !== nextProps.options[idx]) {\n            //            let node = this.refs['list-'+idx] //div, ReactDOM.findDOMNode( this.refs['list-'+idx] )\n            //            node.scrollTop = this.state._scrollStartTop[idx] = 0\n            //        }\n            //    })\n            //}\n\n            //fixed scrollTop when update props\n            var values = nextProps.value,\n                opArr = nextProps.options,\n                preValues = this.state.value,\n                preOpArr = this.state.options,\n                opHeight = this.state.optionHeight;\n            if (!Array.isArray(values)) {\n                values = [values];\n                opArr = [opArr];\n                preValues = [preValues];\n                preOpArr = [preOpArr];\n            }\n            values.forEach(function (v, idx) {\n                if (values[idx] !== preValues[idx] || opArr[idx] !== preOpArr[idx]) {\n                    var ops = opArr[idx],\n                        top = 0;\n                    for (var oi = 0; oi < ops.length; oi++) {\n                        var opv = typeof ops[oi] === 'string' || typeof ops[oi] === 'number' ? ops[oi] : ops[oi].value;\n                        if (String(opv) === String(v)) {\n                            top = oi * opHeight;\n                            break;\n                        }\n                    }\n                    var node = _this2.refs['list-' + idx]; //div, ReactDOM.findDOMNode( this.refs['list-'+idx] )\n                    node.scrollTop = _this2.state._scrollStartTop[idx] = top;\n                }\n            });\n\n            this.setState({\n                value: nextProps.value,\n                options: nextProps.options\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this3 = this;\n\n            var op = this.refs['op-0-0'],\n                opHeight = 0;\n            if (op) {\n                opHeight = this.state.optionHeight = _reactDom2.default.findDOMNode(op).clientHeight;\n            }\n            this.state._initValueIndexes.forEach(function (vi, idx) {\n                if (vi > 0) {\n                    var node = _this3.refs['list-' + idx]; //div, ReactDOM.findDOMNode( this.refs['list-'+idx] )\n                    node.scrollTop = _this3.state._scrollStartTop[idx] = vi * opHeight;\n                }\n            });\n            //window.addEventListener('scroll', this._onPageScroll)\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            //window.removeEventListener('scroll', this._onPageScroll)\n        }\n    }, {\n        key: 'value',\n        value: function value() {\n            return this.state.value;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var values = this.state.value,\n                __options = this.state.options;\n            if (!Array.isArray(values)) {\n                values = [values];\n                __options = [__options];\n            }\n\n            var initValueIndexes = [];\n            var style = {\n                width: 100 / __options.length + '%'\n            };\n            var i = -1; //counter for __options, for it is an array or key-map object\n            var lists = __options.map(function (options) {\n                if (!options) return;\n                i++;\n                var j = -1; //counter for options, for it is an array or key-map object\n                return _react2.default.createElement(\n                    'div',\n                    {\n                        key: i,\n                        ref: 'list-' + i,\n                        'data-id': i,\n                        className: 'list-wrap',\n                        style: style,\n                        onScroll: isBrowser ? _this4._onScroll : undefined\n                    },\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        options.map(function (op) {\n                            j++;\n                            if (typeof op === 'string' || typeof op === 'number') {\n                                op = {\n                                    text: op,\n                                    value: op\n                                };\n                            } else if ((typeof op === 'undefined' ? 'undefined' : _typeof(op)) !== 'object' || !op.text) return;\n                            if (typeof op.value !== 'string' && typeof op.value !== 'number') op.value = '';\n\n                            if (String(op.value) === String(values[i])) {\n                                initValueIndexes.push(j);\n                            }\n\n                            return _react2.default.createElement(\n                                _reactTapper2.default,\n                                { key: j,\n                                    ref: 'op-' + i + '-' + j,\n                                    'data-id': i + '-' + j,\n                                    'data-value': JSON.stringify(op),\n                                    component: 'li',\n                                    onTap: _this4._clickOnOption\n                                },\n                                op.text\n                            );\n                        })\n                    )\n                );\n            });\n\n            this.state._initValueIndexes = initValueIndexes;\n\n            var popupStyle = {};\n            if (this.props.width && _es6Viewpoint2.default && _es6Viewpoint2.default.width >= 768) {\n                popupStyle.width = this.props.width;\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: [\"picker\", this.props.className].join(' ') },\n                this.props.children,\n                _react2.default.createElement(\n                    'div',\n                    { className: [\"container\", \"table\", this.props.className, this.state.open ? \"show\" : undefined].join(' ') },\n                    _react2.default.createElement(_reactTapper2.default, { className: 'overlay', onTap: this._handleOverlayTouchTap }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'cell' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: [\"popup\", this.props.theme, this.state.open ? \"show\" : undefined].join(' '), style: popupStyle },\n                            lists,\n                            _react2.default.createElement('div', { className: 'cover upper' }),\n                            _react2.default.createElement('div', { className: 'cover lower' })\n                        )\n                    )\n                )\n            );\n        }\n    }, {\n        key: 'dismiss',\n        value: function dismiss() {\n            if (this.state.closeable) {\n                this._onDismiss();\n            }\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            // prevent rapid show/hide\n            this._onShow();\n        }\n    }, {\n        key: '_handleOverlayTouchTap',\n        value: function _handleOverlayTouchTap() {\n            if (this.state.closeable) {\n                this._onDismiss();\n                this.props.onClickAway && this.props.onClickAway();\n            }\n        }\n    }, {\n        key: '_onShow',\n        value: function _onShow() {\n            setTimeout(function () {\n                this.state.closeable = true;\n            }.bind(this), 250);\n            this.setState({ open: true });\n            this.props.onShow && this.props.onShow();\n        }\n    }, {\n        key: '_onDismiss',\n        value: function _onDismiss() {\n            this.setState({ open: false, loading: false });\n            this.props.onDismiss && this.props.onDismiss();\n        }\n    }, {\n        key: '_onPageScroll',\n        value: function _onPageScroll(e) {}\n    }, {\n        key: '_onScroll',\n        value: function _onScroll(e) {\n            var _this5 = this;\n\n            var el = e.target,\n                idx = parseInt(el.dataset ? el.dataset.id : el.getAttribute('data-id'), 10),\n                opHeight = this.state.optionHeight,\n                scrollStartTop = this.state._scrollStartTop;\n\n            window.clearTimeout(this.state._scrollTimer);\n            this.state._scrollTimer = window.setTimeout(function () {\n                if (typeof scrollStartTop[idx] !== 'number') scrollStartTop[idx] = 0;\n                if (scrollStartTop[idx] === el.scrollTop) return;\n\n                var scrollTop = el.scrollTop,\n                    mod = scrollTop % opHeight,\n                    percent = mod / opHeight;\n\n                var toLowerItem = function toLowerItem() {\n                    var diff = opHeight - mod;\n                    scrollTop += diff;\n                    el.scrollTop += diff;\n                };\n                var toUpperItem = function toUpperItem() {\n                    scrollTop -= mod;\n                    el.scrollTop -= mod;\n                };\n\n                if (scrollTop > scrollStartTop[idx]) {\n                    percent > 0.46 ? toLowerItem() : toUpperItem();\n                } else {\n                    percent < 0.64 ? toUpperItem() : toLowerItem();\n                }\n                scrollStartTop[idx] = scrollTop;\n\n                var opname = 'op-' + idx + '-' + scrollTop / opHeight;\n                var op = _reactDom2.default.findDOMNode(_this5.refs[opname]).getAttribute('data-value');\n                if (!op) return;\n                op = JSON.parse(op);\n\n                var value = _this5.state.value;\n                if (Array.isArray(value)) {\n                    value[idx] = op.value;\n                } else {\n                    value = op.value;\n                }\n                _this5.setState({\n                    value: value\n                });\n                _this5.props.onChange(op.value, op.text, idx);\n            }, 250);\n        }\n    }, {\n        key: '_clickOnOption',\n        value: function _clickOnOption(e) {\n            var el = e.target,\n                value = el.dataset ? el.dataset.id : el.getAttribute('data-id');\n            if (!value) return;\n\n            var arr = value.split('-');\n            if (arr.length < 2) return;\n\n            var _list = this.refs['list-' + arr[0]];\n            if (!_list) return;\n            var list = _list; //div, ReactDOM.findDOMNode(_list)\n            list.scrollTop = this.state.optionHeight * parseInt(arr[1], 10);\n        }\n    }]);\n\n    return Picker;\n}(_react.Component);\n\nPicker.propTypes = {\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.array]).isRequired,\n    options: _propTypes2.default.array.isRequired,\n    onChange: _propTypes2.default.func,\n    onShow: _propTypes2.default.func,\n    onDismiss: _propTypes2.default.func,\n    onClickAway: _propTypes2.default.func,\n    width: _propTypes2.default.string,\n    theme: _propTypes2.default.string\n};\nPicker.defaultProps = {\n    onChange: function onChange(value, text, idx) {},\n    theme: 'light'\n};\nexports.default = Picker;\n"]},"metadata":{},"sourceType":"script"}